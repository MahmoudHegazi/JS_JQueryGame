<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

<style>
.right {
   -webkit-transform: scaleX(-1);
  transform: scaleX(-1);
}

.champ_left{
   -webkit-transform: scaleX(-1);
  transform: scaleX(-1);
}
</style>
<script>



$(document).ready(function(){
let timeSleep = false;
const champion = document.querySelector("#champ");

let champTop = 150;
let champLeft = 150;
let moveSleep = 300;
const moveX = "https://i.pinimg.com/originals/bd/6c/33/bd6c332688c22883c9ac21e55e4805bc.gif";

const moveY = "https://www.fightersgeneration.com/nf7/char/sol-badguy-guiltygear-xrd-walk.gif";

const stop = "https://gifimage.net/wp-content/uploads/2018/05/sol-badguy-gif.gif";

const selectPosition = (condition)=>{
  if (condition == "moveX"){
    $("#champ").attr("src",moveX);
  } else if (condition == "moveY") {
    $("#champ").attr("src",moveY);
  } else if (condition == "stop") {
    $("#champ").attr("src",stop);
  }
};


const sleep = async (miliseconds)=> {
  timeSleep = true;
  setTimeout(()=> {
  
  timeSleep = false;
  selectPosition("stop");
  return false;
  }, miliseconds);  
  
};

 


async function jumb(){

 if (champTop > 80 && timeSleep == false) {
  await sleep(52);
  champTop -= 80;
  await $("#champ_container").animate({top: champTop});
  await setTimeout(()=>{champTop += 80;
  $("#champ_container").animate({top: champTop});}, 50);
  }
  /*else if (champTop < 80 && timeSleep == false) {
    sleep(52);
    let minius = 80 - champTop;
    champTop = minius;
    $("#champ_container").animate({top: champTop});
    setTimeout(()=>{champTop += minius;
    $("#champ_container").animate({top: champTop});}, 50);
  } else {
    return false;
  } */
}

jumb();




const moveChamp = async (direction, champ)=> {
      
  if (direction == "right" && timeSleep == false){
    // move right
    selectPosition("moveX");
    sleep(moveSleep);
    
    if (champLeft > 690) {
      
      $("#champ").removeClass("champ_left");
      champLeft = 700;
      $("#champ_container").animate({left: `${champLeft}px`});      
    } else {
      await $("#champ").removeClass("champ_left");
      champLeft = champLeft + 50;
      await $("#champ_container").animate({left: `${champLeft}px`});
    }
    
    
  } else if (direction == "left" && timeSleep == false) {
    
    // move left
    selectPosition("moveX");
    sleep(moveSleep);
    if (champLeft > 50) {
      champLeft = champLeft - 50;
      await $("#champ_container").animate({left: `${champLeft}px`});
      await $("#champ").addClass("champ_left");
      return true;
    } else {
      await $("#champ").addClass("champ_left");
      champLeft = 0;
      await $("#champ_container").animate({left: `${champLeft}px`});
      return true;
    }
    
  } else if (direction == "up" && timeSleep == false) {
    // move up
    selectPosition("moveY");
    sleep(moveSleep);
    if (champTop > 50) {
      champTop = champTop - 50;
      await $("#champ_container").animate({top: `${champTop}px`});
      return true;
    } else {
      champTop = 0;
      await $("#champ_container").animate({top: champTop});
      return true;
    }
  
  } else if (direction == "down" && timeSleep == false) {
    // move down
    selectPosition("moveY");
    sleep(moveSleep);
    if (champTop > 580) {
      champTop = 590;
      await $("#champ_container").animate({top: `${champTop}px`});
      return true;
    } else {
      champTop = champTop + 50;
      await $("#champ_container").animate({top: champTop});
      return true;
    }  
  } else {
    selectPosition("stop");
    console.log(direction, "falseeee", $("#champ"));
    return false;
    
  }
  
  return true;

  
  
};

// moving 

addEvent(document, "keydown", function (e) {
    e = e || window.event;
    //console.log(e);
    // use e.keyCode

    if (e.code === "ArrowRight"){
    
      moveChamp("right", champion);
      console.log("right");
    } else if (e.code === "ArrowLeft") {
      moveChamp("left", champion);
      console.log("left");
    } else if (e.code === "ArrowUp"){
      moveChamp("up", champion);
      console.log("up");
    } else if (e.code === "ArrowDown"){
      moveChamp("down", champion);
      console.log("down");
    }

});


function addEvent(element, eventName, callback) {
    if (element.addEventListener) {
        element.addEventListener(eventName, callback, false);
    } else if (element.attachEvent) {
        element.attachEvent("on" + eventName, callback);
    } else {
        element["on" + eventName] = callback;
    }
}

});
</script> 
</head>
<body>



<div id="champ_container"  class="champ_cont" style="height:100px;width:150px;position:absolute;top:150px;">
  <div class="progress" style="width:150px;position:absolute;top:-20px;left:30px;">
    <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width:100%">
      100% (Health)
    </div>
  </div>
  <img width="200" height="200" id="champ" class="champ" src="https://gifimage.net/wp-content/uploads/2018/05/sol-badguy-gif.gif" >
<div>  






</body>
</html>
